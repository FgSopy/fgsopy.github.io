<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <title>联机数据存储站 | By FgSopy</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/ODSS.css">
</head>
<body>
    <header>
        <h1>联机数据存储站-PWET0235-By-FgSopy</h1>
        <p class="subtitle">online-data-storage_station_pwet0235_byfgsopy</p>
    </header>

    <div class="container">
        <!-- 数据管理区域 -->
        <div class="card">
            <h2><i>📝</i> 数据管理</h2>
            
            <div class="form-group">
                <label for="data-key">键名:</label>
                <input type="text" id="data-key" placeholder="输入键名 (例如: user_settings)">
            </div>
            
            <div class="form-group">
                <label for="data-value">值:</label>
                <textarea id="data-value" placeholder='输入值 (支持JSON格式，例如: {"theme": "dark", "notifications": true})'></textarea>
            </div>
            
            <div class="actions">
                <button id="save-btn"><i>💾</i> 保存数据</button>
                <button id="load-btn" class="secondary"><i>🔍</i> 加载数据</button>
                <button id="delete-btn" class="danger"><i>🗑️</i> 删除数据</button>
            </div>
            
            <div class="data-list" id="data-list">
                <div class="data-item">
                    <div class="data-content">
                        <strong>示例数据</strong>
                        <div>{"version": "1.0.0"}</div>
                        <div class="data-meta">由 system 于 2023-08-15 创建</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 设备管理区域 -->
        <div class="card">
            <h2><i>📱</i> 设备管理</h2>
            
            <div class="device-list" id="device-list">
                <div class="device-item">
                    <span class="device-status online"></span>
                    <div class="device-info">
                        <div class="device-name">当前设备</div>
                        <div class="device-meta" id="device-id">正在生成设备ID...</div>
                    </div>
                </div>
            </div>
            
            <div class="form-group" style="margin-top: 20px;">
                <label for="connect-device">连接其他设备:</label>
                <input type="text" id="connect-device" placeholder="输入设备ID">
            </div>
            
            <div class="actions">
                <button id="connect-btn"><i>🔗</i> 连接设备</button>
                <button id="disconnect-btn" class="danger"><i>🔌</i> 断开所有连接</button>
                <button id="refresh-btn" class="secondary"><i>🔄</i> 刷新列表</button>
            </div>
            
            <div class="connection-status">
                <div class="status-indicator">
                    <span class="status-dot" id="local-status-dot"></span>
                    <span>本地存储</span>
                </div>
                <div class="status-indicator">
                    <span class="status-dot" id="sync-status-dot"></span>
                    <span>设备同步</span>
                </div>
            </div>
        </div>

        <!-- 同步管理区域 -->
        <div class="card">
            <h2><i>🔄</i> 同步管理</h2>
            
            <div class="form-group">
                <label for="github-token">GitHub Token:</label>
                <input type="password" id="github-token" placeholder="输入GitHub个人访问令牌">
                <small>需要gist权限 (<a href="https://github.com/settings/tokens" target="_blank">获取Token</a>)</small>
            </div>
            
            <div class="form-group">
                <label for="gist-id">Gist ID:</label>
                <input type="text" id="gist-id" placeholder="输入Gist ID (可选)">
                <small>留空将自动创建新Gist</small>
            </div>
            
            <div class="actions">
                <button id="backup-btn" class="secondary"><i>☁️</i> 备份到Gist</button>
                <button id="restore-btn"><i>⏱️</i> 从Gist恢复</button>
                <button id="sync-now-btn"><i>🔄</i> 立即同步</button>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            
            <div class="sync-info" id="sync-info">
                上次同步: <span id="last-sync">从未同步</span>
            </div>
            
            <div class="status online" id="sync-status">
                <i>✅</i> <span>本地存储已就绪</span>
            </div>
        </div>

        <!-- 系统状态区域 -->
        <div class="card">
            <h2><i>📊</i> 系统状态</h2>
            
            <div class="status online" id="storage-status">
                <i>✅</i> <span>IndexedDB: 已初始化</span>
            </div>
            
            <div class="status offline" id="gist-status">
                <i>❌</i> <span>GitHub Gist: 未连接</span>
            </div>
            
            <div class="status offline" id="p2p-status">
                <i>❌</i> <span>设备连接: 未激活</span>
            </div>
            
            <div class="form-group" style="margin-top: 20px;">
                <label for="encryption-key">数据加密密钥 (可选):</label>
                <input type="password" id="encryption-key" placeholder="输入加密密钥">
                <small>设置密钥后所有数据将加密存储</small>
            </div>
            
            <div class="actions">
                <button id="clear-btn" class="danger"><i>🧹</i> 清除所有本地数据</button>
                <button id="reset-btn" class="secondary"><i>🔄</i> 重置连接</button>
            </div>
        </div>
    </div>

    <div class="instructions">
        <h3>使用说明:</h3>
        <ol>
            <li><strong>连接设备</strong>：在两个设备上打开此页面，互相输入对方的设备ID并连接</li>
            <li><strong>保存数据</strong>：在任一设备上保存数据，将自动同步到所有连接的设备</li>
            <li><strong>刷新测试</strong>：刷新页面后连接状态和数据将自动恢复</li>
            <li><strong>云端备份</strong>：使用GitHub Token创建Gist备份点（可选）</li>
        </ol>
    </div>
    
    <div class="notification" id="notification">操作成功!</div>
    
    <script type="text/javascript" src="/js/ODSS.js"></script>
    
</body>
</html>
